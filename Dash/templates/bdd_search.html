<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BDD Steps Wiki</title>

    <link rel="icon"
          type="image/png"
          href="{{ url_for('static', filename='img/22671') }}">

    <!-- Include Bootstrap CSS from a CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <!-- Include Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Roboto+Mono&display=swap" rel="stylesheet">
    <!-- Include Font Awesome for icons -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <!-- Custom Styles -->
    <style>
        body {
            background-color: #f0f2f5;
            font-family: 'Roboto', sans-serif;
            color: #333;
        }

        /* Navbar styling */
        .navbar {
            background-color: #ffffff;
            padding: 15px 30px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .navbar-brand {
            font-weight: 700;
            font-size: 1.5em;
            color: #667eea;
        }

        .navbar-brand span {
            color: #764ba2;
        }

        .navbar-nav .nav-link {
            color: #555;
            font-weight: 500;
            margin-right: 20px;
            transition: color 0.3s;
        }

        .navbar-nav .nav-link:hover {
            color: #667eea;
        }

        /* Hero section */
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            padding: 80px 0 60px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50px;
            left: -50px;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.1), transparent 70%);
            animation: rotateBackground 20s linear infinite;
            z-index: 0;
        }

        @keyframes rotateBackground {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        .hero h1 {
            font-weight: 700;
            font-size: 3em;
            z-index: 1;
            position: relative;
        }

        .hero p {
            font-size: 1.2em;
            margin-top: 20px;
            z-index: 1;
            position: relative;
        }

        /* Search bar */
        .search-container {
            max-width: 600px;
            margin: -40px auto 30px;
            z-index: 1;
            position: relative;
        }

        .search-container .form-control {
            height: 50px;
            font-size: 1.1em;
            border-radius: 30px 0 0 30px;
            border: none;
            padding-left: 25px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .search-container .btn {
            height: 50px;
            font-size: 1.1em;
            border-radius: 0 30px 30px 0;
            background-color: #667eea;
            color: #ffffff;
            border: none;
            padding: 0 30px;
        }

        .search-container .btn:hover {
            background-color: #5a67d8;
        }

        /* Examples section */
        .examples-container {
            max-width: 800px;
            margin: 0 auto 50px;
            text-align: center;
        }

        .examples-container p {
            font-size: 1.1em;
            color: #555;
        }

        .examples-container a {
            color: #667eea;
            font-weight: 500;
            text-decoration: none;
            margin: 0 5px;
            transition: color 0.3s;
        }

        .examples-container a:hover {
            color: #764ba2;
        }

        /* Results section */
        .result-container {
            max-width: 800px;
            margin: 0 auto 60px;
        }

        .test-result {
            background-color: #ffffff;
            padding: 25px 30px;
            margin-bottom: 30px;
            border-radius: 10px;
            border-left: 5px solid #667eea;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .test-steps {
            margin-bottom: 20px;
        }

        .test-steps strong {
            font-size: 1.2em;
            color: #333;
        }

        .test-steps p {
            margin-bottom: 10px;
            font-size: 1.05em;
            color: #555;
        }

        .highlight {
            color: #667eea;
            font-weight: bold;
        }

        .examples strong {
            font-size: 1.1em;
            color: #333;
        }

        .examples pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            white-space: pre-wrap;
            overflow-x: auto;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.95em;
            color: #444;
        }

        .no-results {
            text-align: center;
            font-size: 1.3em;
            color: #777;
            margin-top: 50px;
        }

        /* Footer Signature styling */
        .signature {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            padding: 40px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .signature h2 {
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }

        .signature-table {
            display: inline-table;
            margin: 0 auto;
            z-index: 1;
            position: relative;
        }

        .signature-row {
            display: table-row;
        }

        .signature-cell {
            display: table-cell;
            padding: 8px 15px;
            vertical-align: middle;
        }

        .signature-keyword {
            font-weight: bold;
            text-align: right;
            white-space: nowrap;
            font-size: 1.2em;
        }

        .signature-text {
            text-align: left;
            font-size: 1.2em;
        }

        .signature-icon {
            color: #ffd700;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }

        /* Footer Emoji */
        .smiley-face {
            font-size: 2.5em;
            margin-top: 30px;
            display: block;
            text-align: center;
            animation: float 3s infinite ease-in-out;
            position: relative;
            z-index: 1;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        /* Footer Background Decoration */
        .signature::before {
            content: '';
            position: absolute;
            bottom: -50px;
            left: -50px;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.1), transparent 70%);
            animation: rotateBackground 30s linear infinite reverse;
            z-index: 0;
        }

        /* Custom scrollbar for pre element */
        .examples pre::-webkit-scrollbar {
            width: 8px;
        }

        .examples pre::-webkit-scrollbar-thumb {
            background-color: #ced4da;
            border-radius: 4px;
        }

        .examples pre::-webkit-scrollbar-track {
            background-color: #e9ecef;
            border-radius: 4px;
        }

        /* Responsive adjustments */
        @media (max-width: 576px) {
            .hero h1 {
                font-size: 2.2em;
            }

            .search-container {
                margin-top: -20px;
            }

            .examples-container p {
                font-size: 1em;
            }

            .test-result {
                padding: 20px;
            }

            .signature h2 {
                font-size: 1.5em;
            }

            .signature-keyword,
            .signature-text {
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-md">
        <a class="navbar-brand" href="#">BDD<span>Wiki</span></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"><i class="fas fa-bars" style="color: #555;"></i></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <!-- Future navigation items can be added here -->
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#">Docs</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Community</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">GitHub</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="hero">
        <h1>Welcome to the BDD Steps Wiki</h1>
        <p>Your one-stop destination for BDD test steps and examples</p>
    </div>

    <!-- Search Bar -->
    <div class="search-container">
        <div class="input-group mb-3">
            <input type="text" id="searchInput" class="form-control" placeholder="What are you looking for?" aria-label="Search Input" aria-describedby="search-button" />
            <div class="input-group-append">
                <button class="btn" type="button" id="search-button" onclick="searchBDD()"><i class="fas fa-search"></i> Search</button>
            </div>
        </div>
    </div>

    <!-- Examples Section -->
    <div class="examples-container">
        <p>Try searching for:
            <a href="#" onclick="setSearchTerm('emails')">emails</a>,
            <a href="#" onclick="setSearchTerm('login')">login</a>,
            <a href="#" onclick="setSearchTerm('user')">user</a>,
            <a href="#" onclick="setSearchTerm('dashboard')">dashboard</a>,
            <a href="#" onclick="setSearchTerm('policy')">policy</a>
        </p>
    </div>

    <!-- Results Section -->
    <div id="results" class="result-container"></div>

    <!-- Footer Signature Section -->
    <div class="signature">
        <h2>Happy Testing!</h2>
        <div class="signature-table">
            <div class="signature-row">
                <div class="signature-cell signature-keyword">
                    <i class="fas fa-lightbulb signature-icon"></i>Given
                </div>
                <div class="signature-cell signature-text">BDD Wiki is opened</div>
            </div>
            <div class="signature-row">
                <div class="signature-cell signature-keyword">
                    <i class="fas fa-search signature-icon"></i>When
                </div>
                <div class="signature-cell signature-text">Searching for a &lt;keyword&gt;</div>
            </div>
            <div class="signature-row">
                <div class="signature-cell signature-keyword">
                    <i class="fas fa-check signature-icon"></i>Then
                </div>
                <div class="signature-cell signature-text">Testing steps are displayed</div>
            </div>
        </div>
        <!-- Smiley Face -->
        <div class="smiley-face">ðŸ˜Ž</div>
    </div>

    <!-- Include jQuery and Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom Script -->
    <script>
        // Function to perform the search
        function searchBDD() {
            const query = document.getElementById('searchInput').value;

            if (query) {
                fetch(`/search_bdd?query=${encodeURIComponent(query)}`)
                    .then(response => response.json())
                    .then(data => {
                        const resultsContainer = document.getElementById('results');
                        resultsContainer.innerHTML = '';

                        if (data.length > 0) {
                            data.forEach(test => {
                                const testResult = document.createElement('div');
                                testResult.className = 'test-result';

                                // Render the test steps
                                let stepsHTML = '<div class="test-steps"><strong>Test Steps:</strong>';
                                test.highlighted_steps.forEach(step => {
                                    stepsHTML += `<p>${step}</p>`;
                                });
                                stepsHTML += '</div>';

                                // Render the examples
                                let examplesHTML = '<div class="examples"><strong>Examples:</strong><br><pre>';
                                Object.keys(test.examples).forEach(key => {
                                    const values = test.examples[key];
                                    values.forEach(value => {
                                        examplesHTML += `<strong>${key}</strong>: ${value}\n`;
                                    });
                                });
                                examplesHTML += '</pre></div>';

                                // Add the steps and examples to the test result container
                                testResult.innerHTML = stepsHTML + examplesHTML;
                                resultsContainer.appendChild(testResult);
                            });
                        } else {
                            resultsContainer.innerHTML = '<p class="no-results">No matching results found.</p>';
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching BDD sentences:', error);
                    });
            } else {
                alert('Please enter a search term.');
            }
        }

        // Function to set the search term and trigger the search
        function setSearchTerm(term) {
            document.getElementById('searchInput').value = term;
            searchBDD();
        }

        // Add event listener for the Enter key on the search input
        document.getElementById('searchInput').addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault(); // Prevent the default action
                searchBDD(); // Trigger the search function
            }
        });
    </script>
</body>
</html>
